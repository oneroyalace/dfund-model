<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script type="module">
      import {
        Application,
        Controller
      } from "https://unpkg.com/@hotwired/stimulus/dist/stimulus.js";
      import JournalistController from "./journalist_controller.js";
      window.Stimulus = Application.start();
      Stimulus.register("journalist", JournalistController);
    </script>
    <script type="module" src="state_controller.js"></script>
    <title></title>
    <script></script>
  </head>
  <style>
    :root {
      --teal: #44AA99;
      --cyan: #88CCEE;
      --sand: #DDCC77;
      --rose: #CC6677;
      --purple: #AA4499;
      --wine: #882255;
      --calculation-underline-thickness: 3pt;
    }

    body {
      background-color: #fdf9f6;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
    }

    .container-center-justified {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .box {
      margin: 3px;
      padding: 0.25rem;
      border: solid 2px;
      border-radius: 10px;
    }

    .explanation {
      font-size: x-large;
    }

    h2.boxHeader {
      text-align: center;
    }

    div.estimateDescription {
      font-size: x-large;
    }

    div.estimateValue {
      font-size: xxx-large;
    }

    div.calculation {
      font-size: larger;
    }

    table.calculation-table tr,
    table.calculation-table th {
      /*            padding: 3rem;*/
    }

    .num-reporters-text {
        color: var(--teal)
    }

    .num-localities-text {
        color: var(--rose);
    }

    .reporters-per-text {
        color: var(--purple);
    }

    .multiplier-text {
        color: var(--sand);
    }

    .display-none {
      display: none;
    }

    .subgroups-table-row-header {
      text-align: left;
    }

    .locality-subgroups-table-header {
      margin-left: 0.5em;
      margin-right: 0.5em;
    }

    .locality-subgroups-table {
      margin-left: auto;
      margin-right: auto;
    }

    input.num-reporters-input {
      width: 2em;
      text-align: center;
    }

    .input-highlighted {
      border-width: thick;
    }

    .span-highlighted {
      border-style: solid;
      border-width: thick;
    }

    input.num-cd-reporters-input-highlighted,
    span.reporters-cd-span-highlighted {
      border-color: var(--teal)
    }

    input.num-ss-reporters-input-highlighted,
    span.reporters-ss-span-highlighted {
      border-color: var(--cyan)
    }

    input.num-ts-reporters-input-highlighted,
    span.reporters-ts-span-highlighted {
      border-color: var(--sand)
    }

    input.num-muni-reporters-input-highlighted,
    span.reporters-muni-span-highlighted {
      border-color: var(--rose)
    }

    input.num-county-reporters-input-highlighted,
    span.reporters-county-span-highlighted {
      border-color: var(--purple)
    }

    input.num-state-reporters-input-highlighted,
    span.reporters-state-span-highlighted {
      border-color: var(--wine)
    }

    .xs-underline {
      text-decoration: underline;
      text-decoration-thickness: var(--calculation-underline-thickness);
      text-decoration-color: var(--teal);
    }

    .s-underline {
      text-decoration: underline;
      text-decoration-thickness: var(--calculation-underline-thickness);
      text-decoration-color: var(--cyan);
    }

    .m-underline {
      text-decoration: underline;
      text-decoration-thickness: var(--calculation-underline-thickness);
      text-decoration-color: var(--sand);
    }

    .l-underline {
      text-decoration: underline;
      text-decoration-thickness: var(--calculation-underline-thickness);
      text-decoration-color: var(--rose);
    }

    .xl-underline {
      text-decoration: underline;
      text-decoration-thickness: var(--calculation-underline-thickness);
      text-decoration-color: var(--puruple);
    }

    .modal {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      opacity: 0;
      visibility: hidden;
      transform: scale(1.1);
      transition: visibility 0s linear 0.25s, opacity 0.25s 0s, transform 0.25s
    }

    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: floralwhite;
      padding: 1rem 1.5rem;
      width: 90%;
/*      height: 50%;*/
      border-radius: 0.5rem;
    }

    .invisible {
      visibility: hidden;
    }

    .show-modal {
      opacity: 1;
      visibility: visible;
      transform: scale(1.0);
      transition: visibility 0s linear 0s, opacity 0.25s 0s, transform 0.25s;
    }

    .blurred {
      filter: blur(2px);
    }

    .muted-background {
      background-color: inherit;
    }

    .page-container {
      width: 100%;
      height: 100%;
    }

    .close-button {
      float: right;
      width: 1.5rem;
      line-height: 1.5rem;
      text-align: center;
      cursor: pointer;
      border-radius: 0.25rem;
      background-color: lightgray;
    }

    .close-button:hover {
      background-color: darkgray;
    }
  </style>
  <body>
    <div class="modal"></div>
    <div class="page-container" data-action="click->journalist#toggleModal">
      <div data-controller="journalist">
        <div class="main-view">
            <div class="container-center-justified main-view">
              <form data-journalist-target="numJournalistsForm" data-action="journalist#toggleNumReporters" id="form">
                <div class="container" style="justify-content: center; max-width: 800px ;">
                  <div class="box" id="cd-box" data-reporters-per=7>
                    <h2 class="boxHeader">For each house district</h2>
                    <table>
                      <tr>
                        <th># of reporters covering...</th>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-cd-reporters-input num-reporters-input" data-state-target="communityServicesReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Community Services</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-cd-reporters-input num-reporters-input" data-state-target="criminalJusticeReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Criminal Justice</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-cd-reporters-input num-reporters-input" data-state-target="educationReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Education</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-cd-reporters-input num-reporters-input" data-state-target="electionsReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Elections</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-cd-reporters-input num-reporters-input" data-state-target="environmentReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Environment</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-cd-reporters-input num-reporters-input" data-state-target="healthcareReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Healthcare</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-cd-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Infrastructure</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="0" class="num-cd-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Social identity groups</span>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <div class="box" id="ss-box" data-reporters-per=1>
                    <h2 class="boxHeader">For each school system</h2>
                    <table>
                      <tr>
                        <th># of reporters covering...</th>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-ss-reporters-input num-reporters-input" data-state-target="educationReportersInputSS" data-action="state#toggleNumReporters" />
                          <span>Education</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="0" class="num-cd-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Social identity groups</span>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <div class="box" id="ts-box" data-reporters-per=7>
                    <h2 class="boxHeader">For each township</h2>
                    <table>
                      <tr>
                        <th># of reporters covering...</th>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-ts-reporters-input num-reporters-input" data-state-target="communityServicesReportersInputTownship" data-action="state#toggleNumReporters" />
                          <span>Community Services</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-ts-reporters-input num-reporters-input" data-state-target="criminalJusticeReportersInputTownship" data-action="state#toggleNumReporters" />
                          <span>Criminal Justice</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-ts-reporters-input num-reporters-input" data-state-target="educationReportersInputTownship" data-action="state#toggleNumReporters" />
                          <span>Education</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-ts-reporters-input num-reporters-input" data-state-target="electionsReportersInputTownship" data-action="state#toggleNumReporters" />
                          <span>Elections</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-ts-reporters-input num-reporters-input" data-state-target="environmentReportersInputTownship" data-action="state#toggleNumReporters" />
                          <span>Environment</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-ts-reporters-input num-reporters-input" data-state-target="healthcareReportersInputTownship" data-action="state#toggleNumReporters" />
                          <span>Healthcare</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-ts-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputTownship" data-action="state#toggleNumReporters" />
                          <span>Infrastructure</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="0" class="num-cd-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Social identity groups</span>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <div class="box" id="muni-box" data-reporters-per=7>
                    <h2 class="boxHeader">For each municipality</h2>
                    <table>
                      <tr>
                        <th># of reporters covering...</th>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-muni-reporters-input num-reporters-input" data-state-target="communityServicesReportersInputMunicipal" data-action="state#toggleNumReporters" />
                          <span>Community Services</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-muni-reporters-input num-reporters-input" data-state-target="criminalJusticeReportersInputMunicipal" data-action="state#toggleNumReporters" />
                          <span>Criminal Justice</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-muni-reporters-input num-reporters-input" data-state-target="educationReportersInputMunicipal" data-action="state#toggleNumReporters" />
                          <span>Education</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-muni-reporters-input num-reporters-input" data-state-target="electionsReportersInputMunicipal" data-action="state#toggleNumReporters" />
                          <span>Elections</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-muni-reporters-input num-reporters-input" data-state-target="environmentReportersInputMunicipal" data-action="state#toggleNumReporters" />
                          <span>Environment</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-muni-reporters-input num-reporters-input" data-state-target="healthcareReportersInputMunicipal" data-action="state#toggleNumReporters" />
                          <span>Healthcare</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-muni-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputMunicipal" data-action="state#toggleNumReporters" />
                          <span>Infrastructure</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="0" class="num-cd-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Social identity groups</span>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <div class="box" id="county-box" data-reporters-per=7>
                    <h2 class="boxHeader">For each county</h2>
                    <table>
                      <tr>
                        <th># of reporters covering...</th>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-county-reporters-input num-reporters-input" data-state-target="communityServicesReportersInputCounty" data-action="state#toggleNumReporters" />
                          <span>Community Services</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-county-reporters-input num-reporters-input" data-state-target="criminalJusticeReportersInputCounty" data-action="state#toggleNumReporters" />
                          <span>Criminal Justice</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-county-reporters-input num-reporters-input" data-state-target="educationReportersInputCounty" data-action="state#toggleNumReporters" />
                          <span>Education</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-county-reporters-input num-reporters-input" data-state-target="electionsReportersInputCounty" data-action="state#toggleNumReporters" />
                          <span>Elections</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-county-reporters-input num-reporters-input" data-state-target="environmentReportersInputCounty" data-action="state#toggleNumReporters" />
                          <span>Environment</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-county-reporters-input num-reporters-input" data-state-target="healthcareReportersInputCounty" data-action="state#toggleNumReporters" />
                          <span>Healthcare</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-county-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputCounty" data-action="state#toggleNumReporters" />
                          <span>Infrastructure</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="0" class="num-cd-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Social identity groups</span>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <div class="box" id="state-box" data-reporters-per=7>
                    <h2 class="boxHeader">For each state</h2>
                    <table>
                      <tr>
                        <th># of reporters covering...</th>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-state-reporters-input num-reporters-input" data-state-target="communityServicesReportersInputState" data-action="state#toggleNumReporters" />
                          <span>Community Services</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-state-reporters-input num-reporters-input" data-state-target="criminalJusticeReportersInputState" data-action="state#toggleNumReporters" />
                          <span>Criminal Justice</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-state-reporters-input num-reporters-input" data-state-target="educationReportersInputState" data-action="state#toggleNumReporters" />
                          <span>Education</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-state-reporters-input num-reporters-input" data-state-target="electionsReportersInputState" data-action="state#toggleNumReporters" />
                          <span>Elections</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-state-reporters-input num-reporters-input" data-state-target="environmentReportersInputState" data-action="state#toggleNumReporters" />
                          <span>Environment</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-state-reporters-input num-reporters-input" data-state-target="healthcareReportersInputState" data-action="state#toggleNumReporters" />
                          <span>Healthcare</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="1" class="num-state-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputState" data-action="state#toggleNumReporters" />
                          <span>Infrastructure</span>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input type="text" value="0" class="num-cd-reporters-input num-reporters-input" data-state-target="infrastructureReportersInputCD" data-action="state#toggleNumReporters" />
                          <span>Social identity groups</span>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
                <button type="submit" form="form" value="update" style="padding-top: 2px; display: none;">
                  <svg fill="#000000" height="15px" width="15px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 492.88 492.88" xml:space="preserve" stroke="#000000" stroke-width="0.00492883" transform="matrix(1, 0, 0, 1, 0, 0)rotate(0)">
                    <g stroke-width="0" />
                    <g stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="9.85766" />
                    <g id="SVGRepo_iconCarrier">
                      <g>
                        <g>
                          <path d="M122.941,374.241c-20.1-18.1-34.6-39.8-44.1-63.1c-25.2-61.8-13.4-135.3,35.8-186l45.4,45.4c2.5,2.5,7,0.7,7.6-3 l24.8-162.3c0.4-2.7-1.9-5-4.6-4.6l-162.4,24.8c-3.7,0.6-5.5,5.1-3,7.6l45.5,45.5c-75.1,76.8-87.9,192-38.6,282 c14.8,27.1,35.3,51.9,61.4,72.7c44.4,35.3,99,52.2,153.2,51.1l10.2-66.7C207.441,421.641,159.441,407.241,122.941,374.241z" />
                          <path d="M424.941,414.341c75.1-76.8,87.9-192,38.6-282c-14.8-27.1-35.3-51.9-61.4-72.7c-44.4-35.3-99-52.2-153.2-51.1l-10.2,66.7 c46.6-4,94.7,10.4,131.2,43.4c20.1,18.1,34.6,39.8,44.1,63.1c25.2,61.8,13.4,135.3-35.8,186l-45.4-45.4c-2.5-2.5-7-0.7-7.6,3 l-24.8,162.3c-0.4,2.7,1.9,5,4.6,4.6l162.4-24.8c3.7-0.6,5.4-5.1,3-7.6L424.941,414.341z" />
                        </g>
                      </g>
                    </g>
                  </svg>
                </button>
              </form>
            </div>
            <div class="container-center-justified" style="flex-direction: row; width: 80%; margin-left: auto; margin-right: auto;">
              <div class="box">
                <div class="estimateDescription"> Editorial employees required </div>
                <div class="estimateValue">
                  <span data-journalist-target="numEditorialEmployeesEstimateSpan" class="num-journalists-estimate"></span>
                </div>
              </div>
              <div class="box">
                <div class="estimateDescription"> Non-editorial employees required </div>
                <div class="estimateValue">
                  <span data-journalist-target="numNonEditorialEmployeesEstimateSpan" class="num-journalists-estimate"></span>
                </div>
              </div>
              <div class="box">
                <div class="estimateDescription"> Funds required: </div>
                <div class="estimateValue">
                  <span data-journalist-target="totalCostEstimateSpan"></span>
                </div>
              </div>
            </div>
            <button data-action="journalist#toggleModal">show calculation</button>
        </div>
        <div class="modal-content invisible">
          <span class="close-button" data-action="click->journalist#toggleModal">×</span>
          <div class="container" style="flex-wrap: nowrap; margin-left: auto; margin-top: auto; margin-right: 20px">
            <div class="box calculation" style="padding: 0.5rem;">
              <table class="calculation-table">
                <tr>
                  <th style="padding-right: 1rem; text-align: left">Reporters required to cover...</th>
                  <th></th>
                </tr>
                <tr>
                  <td data-locality-type="cd" data-action="mouseover->journalist#setExplanations">Congressional districts</td>
                  <td data-journalist-target="cdTableRow">td>
                </tr>
                <tr>
                  <td data-locality-type="ss" data-action="mouseover->journalist#setExplanations">School systems</td>
                  <td data-journalist-target="ssTableRow">34</td>
                </tr>
                <tr>
                  <td data-locality-type="ts" data-action="mouseover->journalist#setExplanations">Townships</td>
                  <td data-journalist-target="tsTableRow">34</td>
                </tr>
                <tr>
                  <td data-locality-type="muni" data-action="mouseover->journalist#setExplanations">Municipalities</td>
                  <td data-journalist-target="muniTableRow">34</td>
                </tr>
                <tr>
                  <td data-locality-type="county" data-action="mouseover->journalist#setExplanations">County governments</td>
                  <td data-journalist-target="countyTableRow">34</td>
                </tr>
                <tr>
                  <td data-locality-type="state" data-action="mouseover->journalist#setExplanations">State governments</td>
                  <td data-journalist-target="stateTableRow"></td>
                </tr>
              </table>
            </div>
            <div data-journalist-target="explanationContainer" data-active-locality-type="cd" class="container" style="flex-direction: column; flex-shrink: 3;">
              <div class="box explanation" data-journalist-target="calculationEstimateDescriptionDiv"></div>
              <div class="box explanation" data-journalist-target="calculationEstimateExplanationDiv"></div>
              <div class="box explanation calculation" data-journalist-target="calculationDiv"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>